# IDKit v1 Migration Guide

This guide will help you migrate your application from the beta version of IDKit (v0.5.1 or earlier) to the new release of IDKit (v1.0.0 or later). 
We recommend you familiarize yourself with the coinciding release of [World ID 2.0](https://worldcoin.org/blog/link-to-blog-post) to understand the new features and changes.

<Note>
    The [Breaking Changes](#breaking-changes) section outlines changes that must be addressed in order to successfully migrate your application.
    The [New Features](#new-features) and [Deprecated Functionality](#deprecated-functionality) sections outline changes that do not require immediate action to successfully upgrade to IDKit v1.
</Note>

## Breaking Changes

IDKit v1 introduces a number of breaking changes that must be addressed in order to successfully upgrade to IDKit v1.

<Note type="warning">
    The minimum versions of World App compatible with IDKit v1 are **2.5.0.0 on Android** and **2.5.1 on iOS**. 
    If your users experience issues after migrating your application to IDKit v1, please ensure they are using the latest version of World App.
</Note>

### Changes to `credential_types`

The `phone` credential has been deprecated in favor of World ID Lite. World ID Lite is the name for the new `device` credential, which relies on the user's identity wallet, such as World App, to verify user's unique device fingerprint.

This device fingerprint acts as the unique identifier within World ID, and all World App users with a unique device will be issued this credential. This is more scalable, secure, and privacy-preserving than the `phone` credential, which was previously issued when a user verified their phone number in World App.

In order to support this change, the `credential_types` field in the IDKitWidget's parameters has been updated. If you previously accepted the `phone` credential, you should now accept the `device` credential instead.

<CodeGroup title="Device Credential">
```jsx {{ title: "JavaScript" }}
import { IDKitWidget } from '@worldcoin/idkit'

<IDKitWidget
	app_id="app_GBkZ1KlVUdFTjeMXKlVUdFT"
	action="vote_1"
	onSuccess={onSuccess}
	handleVerify={handleVerify}
	credential_types={['orb', 'device']} // `phone` has been replaced with `device`
>
	{({ open }) => <button onClick={open}>Verify with World ID</button>}
</IDKitWidget>
```
```tsx {{ title: "TypeScript" }}
import { IDKitWidget, CredentialType } from '@worldcoin/idkit'

<IDKitWidget
	app_id="app_GBkZ1KlVUdFTjeMXKlVUdFT"
	action="vote_1"
	onSuccess={onSuccess}
	handleVerify={handleVerify}
	credential_types={[CredentialType.Orb, CredentialType.Device]} // `phone` has been replaced with `device`
>
	{({ open }) => <button onClick={open}>Verify with World ID</button>}
</IDKitWidget>
```
</CodeGroup>

### New Package for Vanilla JavaScript

If your application uses vanilla JavaScript, you will need to install the new `@worldcoin/idkit-standalone` package instead of `@worldcoin/idkit`. 
This package acts as a wrapper around the `@worldcoin/idkit` package for applications that do not use React.

<Note>See the [IDKit Standalone](/reference/idkit#idkit-standalone) reference documentation for integration details.</Note>

## New Features

This section outlines new features introduced in IDKit v1 and other developer tools. These features are optional, and you can safely upgrade to IDKit v1 without making any changes described in this section.

### Wallet Bridge

The Wallet Bridge is a lightweight, open-source, and secure message passing service that allows IDKit to request and receive a zero-knowledge proof from a user's identity wallet, such as World App. This replaces WalletConnect, which was previously used for this functionality.
The Wallet Bridge enables increased performance both in terms of speed and stability.

<Note>
    Read more about the Wallet Bridge in the [IDKit Reference Documentation](/reference/idkit#parameters).

    You can view the [Wallet Bridge](https://github.com/worldcoin/wallet-bridge) GitHub repository or [Protocol Internals](/further-reading/protocol-internals#wallet-bridge) page to learn more about how the Wallet Bridge works.
</Note> 

### World ID Reset

World ID Reset is a new feature that allows users to reset their World ID in case their World ID is lost or stolen.

<Note>Read more about World ID Reset and important considerations for your application in the [World ID Reset documentation](/further-reading/world-id-reset).</Note>

### `onError` Callback

The new `onError` callback allows you to gracefully handle errors that occur during the World ID verification flow. This optional callback is called when the IDKit Widget is closed from an error state.

<Note>Read more about the `onError` callback in the [IDKit reference documentation](/reference/idkit#parameters).</Note>

### Self-Hosted Applications

Self-hosted applications are now supported by IDKit. These applications completely bypass the Worldcoin Developer Portal, allowing for permissionless use of the World ID protocol with IDKit.

<Note>Read more about self-hosted applications in the [IDKit Reference](/reference/idkit#self-hosted-applications).</Note>

### `idkit-core` Package

The `@worldcoin/idkit-core` package is a new package that contains the core functionality of IDKit, primarily interactions with the Wallet Bridge. This package is used by the `@worldcoin/idkit` and `@worldcoin/idkit-standalone` packages.
**Intended only for use within another IDKit package**, and not intended to be used directly by applications.

### `idkit-js` Monorepo

The [GitHub repository for IDKit](https://github.com/worldcoin/idkit-js) has been updated to a monorepo, which contains the source code for the `@worldcoin/idkit-core`, `@worldcoin/idkit`, and `@worldcoin/idkit-standalone` packages.
This refactor allows for easier maintenance and development of IDKit, and allows for much simpler creation of new IDKit packages for various frontend frameworks.

<Note>Want support for a new frontend framework? Let us know by [opening an issue](https://github.com/worldcoin/idkit-js/issues) or build it and [submit a pull request](https://github.com/worldcoin/idkit-js/pulls)!</Note>

### Email Sign-In for Developer Portal

The [Worldcoin Developer Portal](https://developer.worldcoin.org) now supports signing in with an email address in addition to Sign In with Worldcoin.

## Deprecated Functionality

This section outlines deprecated functionality in IDKit v1. These features have been removed or will be removed in the near future.

### Telemetry

All telemetry has been removed from the IDKit package. The `enableTelemetry` parameter should be removed.

### WalletConnect

WalletConnect was previously used to pass messages between IDKit and a user's identity wallet. This has been replaced with the new Wallet Bridge, which is a lightweight, open-source, and secure message passing service.

If you previously set `walletConnectProjectId` in IDKit's parameters, you should remove it.

<Note>More information about the new Wallet Bridge can be found [above](#wallet-bridge).</Note>

### `SignInWithWorldID` Component

The `SignInWithWorldID` and `SignInButton` components have been removed from IDKit. All applications that wish to use Sign In with Worldcoin should do so through our [OIDC Provider](/id/sign-in).